# üß© AdvancedParser - –£–º–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

`AdvancedParser` - —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è PulseAI, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª—É—á—à–∏–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (RSS/HTML/API) –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–∞—Å–∫–∞–¥–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **RSS/XML —Ñ–∏–¥—ã** - –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ feedparser
- **HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∫–∞—Å–∫–∞–¥–Ω—ã–º –º–µ—Ç–æ–¥–æ–º
- **API endpoints** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON –æ—Ç–≤–µ—Ç–æ–≤

### üß† –ö–∞—Å–∫–∞–¥–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
1. **news-please** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1) - –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
2. **trafilatura** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2) - –Ω–∞–¥–µ–∂–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
3. **AutoScraper** (fallback) - –æ–±—É—á–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### ü§ñ AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **–û—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏** - —á–µ—Ä–µ–∑ `ai_modules.importance`
- **–û—Ü–µ–Ω–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏** - —á–µ—Ä–µ–∑ `ai_modules.credibility`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

### ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –¥–æ 10 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **Connection pooling** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Retry –ª–æ–≥–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
```python
from parsers.advanced_parser import AdvancedParser
import asyncio

async def main():
    async with AdvancedParser() as parser:
        stats = await parser.run()
        print(f"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ {stats['total_saved']} –Ω–æ–≤–æ—Å—Ç–µ–π")

asyncio.run(main())
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```python
async with AdvancedParser(
    max_concurrent=5,      # –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    min_importance=0.5     # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –≤–∞–∂–Ω–æ—Å—Ç–∏
) as parser:
    stats = await parser.run()
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python tools/fetch_and_store_news.py

# –° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
python tools/fetch_and_store_news.py --min-importance 0.5 --max-concurrent 5 --verbose
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–∞—Ä—Å–µ—Ä —á–∏—Ç–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–∑ `config/sources.yaml`:

```yaml
crypto:
  btc:
    sources:
      - name: "Bitcoin Magazine"
        url: "https://bitcoinmagazine.com/.rss/full/"
      - "CoinTelegraph: https://cointelegraph.com/rss/tag/bitcoin"
      
tech:
  ai:
    sources:
      - name: "OpenAI Blog"
        url: "https://openai.com/blog/rss.xml"
```

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ HTTP —Å–µ—Å—Å–∏–∏ —Å connection pooling
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–º–∞—Ñ–æ—Ä–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ URL
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (RSS/HTML)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –º–µ—Ç–æ–¥–æ–º

### 3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (HTML)
- **news-please**: –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- **trafilatura**: –Ω–∞–¥–µ–∂–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- **AutoScraper**: –æ–±—É—á–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### 4. AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –û—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `evaluate_importance()`
- –û—Ü–µ–Ω–∫–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `evaluate_credibility()`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ—Ä–æ–≥—É –≤–∞–∂–Ω–æ—Å—Ç–∏

### 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —á–µ—Ä–µ–∑ `insert_news_item()`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–∞—Ä—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```
[INFO] [crypto/btc] https://bitcoinmagazine.com/.rss/full/ -> START
[INFO] [crypto/btc] https://bitcoinmagazine.com/.rss/full/ -> SUCCESS (news-please, importance: 0.85)
[DEBUG] [crypto/btc] Bitcoin Reaches New High -> SAVED (importance: 0.85)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/test_advanced_parser.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_advanced_parser.py::TestAdvancedParser::test_extract_with_newsplease_success -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest tests/test_advanced_parser.py --cov=parsers.advanced_parser --cov-report=html
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å Binance Blog
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –í—ã–∑–æ–≤ AI-–º–æ–¥—É–ª–µ–π –æ—Ü–µ–Ω–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å database.db_insert
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **Connection pooling** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–°–µ–º–∞—Ñ–æ—Ä** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã
- **Timeout –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install aiohttp feedparser news-please trafilatura autoscraper pyyaml
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ `config/sources.yaml`

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```python
import logging
logging.getLogger().setLevel(logging.DEBUG)
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
```python
async def test_specific_source():
    parser = AdvancedParser()
    await parser._init_session()
    
    result = await parser._process_source(
        "crypto", "btc", "Test", "https://example.com"
    )
    
    print(result)
    await parser._close_session()
```

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ cron –∑–∞–¥–∞—á—É
```bash
# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
*/30 * * * * cd /path/to/project && python tools/fetch_and_store_news.py
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```python
from parsers.advanced_parser import AdvancedParser

@app.route('/admin/update-news')
async def update_news():
    async with AdvancedParser() as parser:
        stats = await parser.run()
        return jsonify(stats)
```

## üìù Changelog

### v1.0.0
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã

---

*–°–æ–∑–¥–∞–Ω–æ –¥–ª—è PulseAI - —É–º–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –Ω–æ–≤–æ—Å—Ç–µ–π*
