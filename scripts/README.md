# üîß PulseAI Development Scripts

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–µ–ø–ª–æ—è PulseAI.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### üöÄ `dev-push.sh` - –£–º–Ω—ã–π push —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
```bash
./scripts/dev-push.sh [commit_message]
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (Black + Flake8)
2. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ö–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ü—É—à–∏—Ç –≤ GitHub

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
./scripts/dev-push.sh

# –°–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
./scripts/dev-push.sh "fix: –∏—Å–ø—Ä–∞–≤–∏–ª –±–∞–≥ –≤ –ø–∞—Ä—Å–µ—Ä–µ"
```

### üîç `pre-push.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ push
```bash
./scripts/pre-push.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. Flake8 –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏)
3. –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤

## üõ†Ô∏è Makefile –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
make pre-push          # Black + Flake8 + –ø—Ä–æ–≤–µ—Ä–∫–∏
make format            # –¢–æ–ª—å–∫–æ Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make lint              # –¢–æ–ª—å–∫–æ Flake8 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏)
make check             # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ + —Ç–µ—Å—Ç—ã
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
```bash
make run-bot           # –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞
make run-web           # –ó–∞–ø—É—Å–∫ WebApp
make run-all           # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make dev               # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
```bash
make db-check          # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
make db-cleanup        # –û—á–∏—Å—Ç–∫–∞ –ë–î
make db-optimize       # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit hooks

Pre-commit hooks —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º `git push`.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- ‚úÖ Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- ‚úÖ Flake8 –ª–∏–Ω—Ç–µ—Ä (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏)
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`tools/`, `venv/`, etc.)

## üö® Troubleshooting

### –ï—Å–ª–∏ pre-push hook –ø–∞–¥–∞–µ—Ç:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä—É—á–Ω—É—é
make pre-push

# –ò–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
git push --no-verify
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
make format            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
make lint              # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏:
```bash
make check-ports       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
make free-ports        # –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç—ã
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make pre-push` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º**
2. **–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./scripts/dev-push.sh`**
3. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ª–∏–Ω—Ç–µ—Ä–æ–º - —Å–Ω–∞—á–∞–ª–∞ `make format`, –ø–æ—Ç–æ–º `make lint`**
4. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (F821, F811) –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**

## üéØ Workflow

```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make run-bot &          # –í —Ñ–æ–Ω–µ
make run-web            # –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

# 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make pre-push           # –ü—Ä–æ–≤–µ—Ä–∫–∏
make test               # –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã

# 3. –î–µ–ø–ª–æ–π
./scripts/dev-push.sh   # –£–º–Ω—ã–π push
```

---

**üí° –°–æ–≤–µ—Ç:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–∏–∞—Å—ã –≤ –≤–∞—à–µ–º shell –¥–ª—è –µ—â—ë –±–æ–ª—å—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞:
```bash
alias push='./scripts/dev-push.sh'
alias check='make pre-push'
alias fmt='make format'
```
