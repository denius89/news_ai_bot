/* PulseAI Light Premium Utilities */
@layer utilities {

    /* Custom animations */
    .animate-fade-in {
        animation: fade-in 0.25s ease-out;
    }

    .animate-slide-up {
        animation: slide-up 0.3s ease-out;
    }

    .animate-pulse-soft {
        animation: pulse-soft 2s ease-in-out infinite;
    }

    /* Hover effects */
    .hover-lift {
        transition: transform 0.2s ease-in-out;
    }

    .hover-lift:hover {
        transform: translateY(-2px);
    }

    .hover-glow {
        transition: box-shadow 0.3s ease-in-out;
    }

    .hover-glow:hover {
        box-shadow: 0 0 20px rgba(0, 191, 166, 0.15);
    }

    /* Text utilities */
    .text-balance {
        text-wrap: balance;
    }

    .text-pretty {
        text-wrap: pretty;
    }

    /* Spacing utilities */
    .space-y-8>*+* {
        margin-top: 2rem;
    }

    .space-y-6>*+* {
        margin-top: 1.5rem;
    }

    .space-y-4>*+* {
        margin-top: 1rem;
    }

    /* Glass effect - moved to design-tokens.css */

    /* Primary Button with AI Flow */
    .btn-primary {
        background: var(--grad-ai-flow);
        color: #fff;
        border-radius: 12px;
        box-shadow: 0 0 12px rgba(0, 166, 200, 0.25);
        transition: all 0.25s ease;
        border: none;
        font-weight: 600;
    }

    .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 0 18px rgba(0, 166, 200, 0.3);
    }

    .btn-primary:active {
        transform: translateY(0);
    }

    /* AI Mist Card styles with smooth interactions */
    .card {
        border-radius: 20px;
        border: 1px solid rgba(230, 235, 240, 0.7);
        background: linear-gradient(180deg, rgba(248, 252, 255, 0.9) 0%, rgba(240, 245, 250, 0.9) 100%);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
        backdrop-filter: blur(8px);
        transition: all 0.25s ease;
    }

    .dark .card {
        border: 1px solid rgba(255, 255, 255, 0.05);
        background: linear-gradient(180deg, rgba(26, 28, 33, 0.85) 0%, rgba(18, 20, 25, 0.85) 100%);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
    }

    .dark .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }

    /* Premium shadows */
    .shadow-premium {
        box-shadow:
            0 1px 3px rgba(0, 0, 0, 0.05),
            0 4px 12px rgba(0, 0, 0, 0.08),
            0 8px 24px rgba(0, 0, 0, 0.06);
    }

    .shadow-premium-hover {
        box-shadow:
            0 2px 6px rgba(0, 0, 0, 0.08),
            0 8px 24px rgba(0, 0, 0, 0.12),
            0 16px 48px rgba(0, 0, 0, 0.08);
    }

    /* Interactive states */
    .interactive {
        @apply cursor-pointer select-none;
        transition: all 0.2s ease-in-out;
    }

    .interactive:hover {
        @apply scale-[1.02];
    }

    .interactive:active {
        @apply scale-[0.98];
    }

    /* Safe area utilities */
    .safe-top {
        padding-top: env(safe-area-inset-top);
    }

    .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .safe-left {
        padding-left: env(safe-area-inset-left);
    }

    .safe-right {
        padding-right: env(safe-area-inset-right);
    }

    /* Mobile utilities */
    .touch-target {
        min-height: 44px;
        min-width: 44px;
    }

    .scroll-smooth {
        scroll-behavior: smooth;
    }

    .scroll-hidden {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .scroll-hidden::-webkit-scrollbar {
        display: none;
    }

    /* Scrollbar hide utility */
    .scrollbar-hide {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Focus utilities */
    .focus-ring {
        @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
        --tw-ring-offset-color: var(--color-surface);
    }

    /* Chip Components - Soft Glass Style */
    .chip {
        /* Единая высота для всех кнопок */
        @apply inline-flex items-center justify-center rounded-full;
        @apply h-9 px-3 sm:px-4;
        @apply select-none whitespace-nowrap cursor-pointer;
        @apply transition-all duration-200;

        /* ЖЕСТКАЯ фиксация размера шрифта для всех состояний */
        font-size: 0.75rem !important;
        /* 12px - как на кнопке "Включено" */
        line-height: 1rem !important;
        /* 16px */
        font-weight: 500 !important;
        /* Фиксированный вес */

        /* Нормализация рендеринга текста */
        text-rendering: geometricPrecision;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;

        /* Soft Glass эффект */
        min-width: 80px;
        backdrop-filter: blur(8px);
    }

    /* Адаптивный размер шрифта только для больших экранов */
    @media (min-width: 640px) {
        .chip {
            font-size: 0.875rem !important;
            /* 14px - чуть больше для планшетов */
            line-height: 1.25rem !important;
            /* 20px */
        }

        .chip-active,
        .chip-inactive,
        .dark .chip-active,
        .dark .chip-inactive {
            font-size: 0.875rem !important;
            /* 14px - принудительно для всех состояний */
            line-height: 1.25rem !important;
            /* 20px */
        }
    }

    /* Принудительная фиксация для всех состояний chip */
    .chip-active,
    .chip-inactive,
    .dark .chip-active,
    .dark .chip-inactive {
        font-size: 0.75rem !important;
        /* 12px - принудительно для всех состояний */
        line-height: 1rem !important;
        /* 16px */
        font-weight: 500 !important;
        /* Фиксированный вес */
    }

    .chip-active {
        /* AI Flow gradient */
        background: var(--grad-ai-flow);
        @apply text-white;
        /* Soft glow эффект */
        box-shadow: 0 0 12px var(--holo-glow), 0 0 20px rgba(0, 166, 200, 0.15);
        border: 1px solid rgba(0, 166, 200, 0.3);
    }

    .chip-active:hover {
        box-shadow: 0 0 16px var(--holo-glow), 0 0 24px rgba(0, 166, 200, 0.2);
        transform: translateY(-1px);
    }

    .chip-inactive {
        /* Soft Glass фон */
        background: var(--color-surface-alt);
        @apply text-text;
        border: 1px solid var(--color-border);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05),
            0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .chip-inactive:hover {
        background: var(--color-surface);
        border-color: var(--color-primary);
        transform: translateY(-1px);
        @apply text-primary;
    }

    /* Dark theme variants */
    .dark .chip-active {
        background: var(--grad-ai-flow);
        @apply text-white;
        box-shadow: 0 0 16px var(--holo-glow), 0 0 24px rgba(0, 166, 200, 0.2);
        border: 1px solid rgba(0, 166, 200, 0.4);
    }

    .dark .chip-active:hover {
        box-shadow: 0 0 20px var(--holo-glow), 0 0 28px rgba(0, 166, 200, 0.25);
        transform: translateY(-1px);
    }

    .dark .chip-inactive {
        /* Dark Soft Glass */
        background: rgba(255, 255, 255, 0.04);
        @apply text-muted;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05),
            0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .dark .chip-inactive:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: var(--color-primary);
        transform: translateY(-1px);
        @apply text-primary;
    }

    /* Compact spacing utilities */
    .space-y-compact>*+* {
        margin-top: 0.5rem;
        /* 8px mobile */
    }

    @media (min-width: 640px) {
        .space-y-compact>*+* {
            margin-top: 0.75rem;
            /* 12px tablet+ */
        }
    }

    .space-y-tight>*+* {
        margin-top: 0.5rem;
        /* 8px */
    }

    /* Accessibility utilities */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    .not-sr-only {
        position: static;
        width: auto;
        height: auto;
        padding: 0;
        margin: 0;
        overflow: visible;
        clip: auto;
        white-space: normal;
    }
}
