<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#1E3A8A">
    <meta name="description" content="PulseAI — умные дайджесты и события с искусственным интеллектом">
    <title>{{ title or "PulseAI - AI-Powered News & Events" }}</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='assets/logo/site.webmanifest') }}">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='assets/logo/logo_icon_180.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='assets/logo/logo_icon_32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='assets/logo/logo_icon_16.png') }}">
    <link rel="icon" href="{{ url_for('static', filename='assets/logo/favicon.ico') }}" sizes="any">
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
    
    <!-- Additional PWA Meta Tags -->
    <meta name="application-name" content="PulseAI">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PulseAI">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#1E3A8A">
    <meta name="keywords" content="AI, новости, дайджест, события, искусственный интеллект">
</head>
<body>
    <!-- Site Header -->
    <header class="pulse-header">
        <div class="container">
            <!-- Logo Section -->
            <div class="logo-section">
                <a href="/" class="pulse-logo">
                    <h1>PulseAI</h1>
                </a>
            </div>

            <!-- Navigation -->
            <nav class="pulse-nav">
                <a href="/" class="{% if active_page == 'home' %}active{% endif %}">Главная</a>
                <a href="/digest" class="{% if active_page == 'digest' %}active{% endif %}">Дайджест</a>
                <a href="/events" class="{% if active_page == 'events' %}active{% endif %}">События</a>
            </nav>
        </div>
    </header>

    <!-- Subnav (filters, etc.) -->
    {% block subnav %}{% endblock %}

    <!-- Page Content -->
    <main class="page-content">
        {% block content %}{% endblock %}
    </main>

    <!-- JavaScript -->
    <script>
        // Интерактивность для табов (chip-filter)
        document.addEventListener('DOMContentLoaded', function() {
            const chipFilters = document.querySelectorAll('.chip-filter');
            
            chipFilters.forEach(chip => {
                chip.addEventListener('click', function(e) {
                    // Плавная анимация
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                    
                    // НЕ перехватываем клик - позволяем браузеру перейти по ссылке
                    // Визуальное состояние будет обновлено после загрузки новой страницы
                });
            });
        });
    </script>
</body>
</html>