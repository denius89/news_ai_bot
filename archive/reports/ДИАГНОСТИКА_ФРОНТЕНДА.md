# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã "–ê—Ä—Ö–∏–≤ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã"

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

### Backend (Python) - –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û ‚úÖ

```python
# –¢–µ—Å—Ç –ø–æ–∫–∞–∑–∞–ª:
–ê–∫—Ç–∏–≤–Ω—ã–µ: 0
–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ: 0  ‚Üê –ü–£–°–¢–û!
–£–¥–∞–ª–µ–Ω–Ω—ã–µ: 4       ‚Üê 4 –¥–∞–π–¥–∂–µ—Å—Ç–∞

–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è: 0     ‚Üê –†–ê–ó–ù–´–ï –°–ü–ò–°–ö–ò!
```

**–í—ã–≤–æ–¥:** Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –†–ê–ó–ù–´–ï —Å–ø–∏—Å–∫–∏ –¥–ª—è –∞—Ä—Ö–∏–≤–∞ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö. –ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ backend!

### Frontend (React) - –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò

–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω.

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ WebApp —Å –∫–æ–Ω—Å–æ–ª—å—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram WebApp
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools –±—Ä–∞—É–∑–µ—Ä–∞ (**F12** –∏–ª–∏ **Cmd+Option+I**)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (**F5**)

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:

```
üì¶ Loaded ARCHIVED digests: X ['digest1', 'digest2', ...]
üóëÔ∏è  Loaded DELETED digests: Y ['digest3', 'digest4', ...]
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚ùì –ß–∏—Å–ª–∞ X –∏ Y –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ —Ä–∞–∑–Ω—ã–µ?
- ‚ùì ID –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ —Ä–∞–∑–Ω—ã–µ?

### –®–∞–≥ 3: –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ –≤–∫–ª–∞–¥–∫–∏

–ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ **"–ê—Ä—Ö–∏–≤"** –∏ **"–ö–æ—Ä–∑–∏–Ω–∞"**.

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è:

```
üì¶ Showing ARCHIVED digests: X
üóëÔ∏è  Showing DELETED digests: Y
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚ùì –ß–∏—Å–ª–∞ –º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫?
- ‚ùì –ò–ª–∏ –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ?

### –®–∞–≥ 4: –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –∏ —Å–æ–æ–±—â–∏—Ç–µ:

1. –ö–∞–∫–∏–µ —á–∏—Å–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ?
2. –ö–∞–∫–∏–µ —á–∏—Å–ª–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫?
3. ID –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ —Ä–∞–∑–Ω—ã–µ –≤ –∞—Ä—Ö–∏–≤–µ –∏ –∫–æ—Ä–∑–∏–Ω–µ?

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã (–≥–∏–ø–æ—Ç–µ–∑—ã)

### –ì–∏–ø–æ—Ç–µ–∑–∞ 1: –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–°–∏–º–ø—Ç–æ–º:** Frontend –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage/cache.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
localStorage.clear();
location.reload();
```

### –ì–∏–ø–æ—Ç–µ–∑–∞ 2: –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

**–°–∏–º–ø—Ç–æ–º:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401/error, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç fallback –¥–∞–Ω–Ω—ã–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—à–∏–±–∫–∏:
```
‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã: ...
‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã: ...
```

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å WebApp (–∑–∞–∫—Ä—ã—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–Ω–æ–≤–æ).

### –ì–∏–ø–æ—Ç–µ–∑–∞ 3: Race condition –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–°–∏–º–ø—Ç–æ–º:** –í–∫–ª–∞–¥–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, state –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, –µ—Å–ª–∏ –æ–¥–Ω–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å 2 —Ä–∞–∑–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ (—É–∂–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ).

### –ì–∏–ø–æ—Ç–µ–∑–∞ 4: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–°–∏–º–ø—Ç–æ–º:** Backend —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω–æ–µ, –Ω–æ —Ä–µ–∞–ª—å–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í Network tab DevTools –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã API:
- `/api/digests/history?include_archived=true`
- `/api/digests/history?include_deleted=true`

## üõ†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–ø–∏—Å–∫–∏:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:** DevTools ‚Üí Application ‚Üí Clear Site Data
2. **–û–±–Ω–æ–≤–∏—Ç–µ WebApp:** –ó–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–Ω–æ–≤–æ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:** –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å user_id

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

1. ‚úÖ **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –®–∞–≥–∏ 1-3** –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤—ã—à–µ
2. üìã **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
3. üîß –Ø –∏—Å–ø—Ä–∞–≤–ª—é –∫–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `webapp/src/pages/DigestPage.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω (`vite build`)

**–î–∞—Ç–∞:** 15 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–ñ–ò–î–ê–ù–ò–ï –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

