# üåê Cloudflare Tunnel Configuration

–ï–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Cloudflare Tunnel –≤ –ø—Ä–æ–µ–∫—Ç–µ PulseAI.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
config/
‚îú‚îÄ‚îÄ cloudflare.py          # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ Cloudflare
‚îî‚îÄ‚îÄ settings.py            # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç cloudflare.py

scripts/
‚îú‚îÄ‚îÄ generate_vite_config.py    # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ Vite
‚îî‚îÄ‚îÄ update_cloudflare_config.py # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤

webapp/
‚îî‚îÄ‚îÄ vite.config.ts         # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∫–æ–Ω—Ñ–∏–≥ Vite
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### `config/cloudflare.py`
- **CLOUDFLARE_TUNNEL_URL** - –æ—Å–Ω–æ–≤–Ω–æ–π URL —Ç—É–Ω–Ω–µ–ª—è
- **CLOUDFLARE_LOCAL_URL** - –ª–æ–∫–∞–ª—å–Ω—ã–π URL –¥–ª—è —Ç—É–Ω–Ω–µ–ª—è
- **CLOUDFLARE_TUNNEL_COMMAND** - –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ —Ç—É–Ω–Ω–µ–ª—è
- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### `scripts/generate_vite_config.py`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `webapp/vite.config.ts` —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ö–æ—Å—Ç–∞–º–∏
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–æ–º–µ–Ω –∏–∑ Cloudflare URL
- –û–±–Ω–æ–≤–ª—è–µ—Ç `allowedHosts` –¥–ª—è Vite

### `scripts/update_cloudflare_config.py`
- –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```bash
make cloudflare-config
```

### –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
make update-config
```

### –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Vite –∫–æ–Ω—Ñ–∏–≥
```bash
python3 scripts/generate_vite_config.py
```

### –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
```bash
python3 scripts/update_cloudflare_config.py
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL Cloudflare Tunnel:

1. **–û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   export CLOUDFLARE_TUNNEL_URL="https://new-url.trycloudflare.com"
   ```

2. **–ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ `.env` —Ñ–∞–π–ª:**
   ```
   CLOUDFLARE_TUNNEL_URL=https://new-url.trycloudflare.com
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   ```bash
   make update-config
   ```

## üìã –ß—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- ‚úÖ `webapp/vite.config.ts` - allowedHosts –¥–ª—è Vite
- ‚úÖ `DEPLOYMENT_GUIDE.md` - URL –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ `DEVELOPMENT_GUIDE.md` - URL –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ `start_services.sh` - URL –≤ –≤—ã–≤–æ–¥–µ —Å–∫—Ä–∏–ø—Ç–∞
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ Python –∫–æ–¥–µ

## üéØ –§—É–Ω–∫—Ü–∏–∏ API

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```python
from config.cloudflare import (
    get_webapp_url,      # URL WebApp
    get_api_url,         # –ë–∞–∑–æ–≤—ã–π URL API
    get_health_url,      # URL health check
    get_dashboard_url,   # URL dashboard
    get_vite_allowed_hosts,  # –•–æ—Å—Ç—ã –¥–ª—è Vite
    get_deployment_info,     # –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    validate_cloudflare_config  # –í–∞–ª–∏–¥–∞—Ü–∏—è
)
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```python
from config.cloudflare import get_webapp_url, get_deployment_info

# –ü–æ–ª—É—á–∏—Ç—å URL WebApp
webapp_url = get_webapp_url()
print(f"WebApp: {webapp_url}")

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
info = get_deployment_info()
for key, value in info.items():
    print(f"{key}: {value}")
```

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ URL —Å–æ–¥–µ—Ä–∂–∏—Ç `trycloudflare.com`
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π URL –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (`http://localhost:8001`)
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –≤–∞–ª–∏–¥–Ω—ã–µ URL

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python3 -c "
from config.cloudflare import validate_cloudflare_config, get_deployment_info
print('–í–∞–ª–∏–¥–∞—Ü–∏—è:', validate_cloudflare_config())
print('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', get_deployment_info())
"
```

### –õ–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ.

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö URL
1. –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤ `config/cloudflare.py`
2. –û–±–Ω–æ–≤–∏—Ç–µ `get_deployment_info()` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è URL –≤ `cloudflare.py`
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ Makefile

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ï–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ** –¥–ª—è –≤—Å–µ—Ö Cloudflare –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ Makefile
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
