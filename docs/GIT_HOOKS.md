# Git Hooks PulseAI

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ git hooks –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ PulseAI.

## üìã –û–±–∑–æ—Ä

PulseAI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç git hooks –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏ push.

### –î–æ—Å—Ç—É–ø–Ω—ã–µ hooks:

1. **pre-commit** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (–±—ã—Å—Ç—Ä–∞—è)
2. **pre-push** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ push (—Å—Ç—Ä–æ–≥–∞—è)

## üîç Pre-commit Hook

–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ staged —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–æ–º–º–∏—Ç–∞.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å Python** ‚Äî –≤—Å–µ staged `.py` —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ **Flake8 (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏)** ‚Äî —Ç–æ–ª—å–∫–æ E9, F63, F7, F82 (–µ—Å–ª–∏ flake8 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)  
‚úÖ **–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** ‚Äî –Ω–∞–ª–∏—á–∏–µ print(), TODO/FIXME –º–µ—Ç–∫–∏  

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
# –û–±—ã—á–Ω—ã–π –∫–æ–º–º–∏—Ç (—Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
git commit -m "feat: –Ω–æ–≤–∞—è —Ñ–∏—á–∞"

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
git commit --no-verify -m "feat: –Ω–æ–≤–∞—è —Ñ–∏—á–∞"

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
SKIP_HOOKS=1 git commit -m "feat: –Ω–æ–≤–∞—è —Ñ–∏—á–∞"
```

### –ß—Ç–æ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

- ‚ùå –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Black (—Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ)
- ‚ùå –í—Å–µ –æ—à–∏–±–∫–∏ Flake8 (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- ‚ùå –°–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏–º–ø–æ—Ä—Ç–æ–≤ (isort)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- ‚úÖ Python 3.6+
- ‚ö†Ô∏è Flake8 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

## üöÄ Pre-push Hook

–°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

#### –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Black –∏ Flake8:
‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç `scripts/strict_check.sh`:
  - Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
  - Flake8 —Å–æ —Å—Ç—Ä–æ–≥–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
  - isort —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞

#### –ï—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–µ—Ç (fallback):
‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å Python** ‚Äî –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞  
‚úÖ **Flake8 (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏)** ‚Äî E9, F63, F7, F82  
‚úÖ **Debug —Ç–æ—á–∫–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ pdb.set_trace() –∏ breakpoint()  

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
# –û–±—ã—á–Ω—ã–π push (—Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
git push origin main

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
git push origin main --no-verify

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
SKIP_HOOKS=1 git push origin main
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:
- ‚úÖ Python 3.6+

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:
- ‚ö†Ô∏è Black ‚Äî `pip install black`
- ‚ö†Ô∏è Flake8 ‚Äî `pip install flake8`
- ‚ö†Ô∏è isort ‚Äî `pip install isort` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
pip install flake8
```

### –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
pip install black flake8 isort
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
python3 -c "import black; print('Black:', black.__version__)"
python3 -c "import flake8; print('Flake8: OK')"
python3 -c "import isort; print('isort:', isort.__version__)"
```

## üí° –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):

```bash
# –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç black + flake8)
./scripts/strict_check.sh
```

### –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ push:

```bash
# –£–º–Ω—ã–π push —Å –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º (—Ç—Ä–µ–±—É–µ—Ç black + flake8)
./scripts/smart_push.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ Make
make smart-push
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

```bash
./scripts/detailed_fix.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ Make
make detailed-fix
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hooks

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ hook:

```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ
chmod -x .git/hooks/pre-commit
chmod -x .git/hooks/pre-push

# –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ
chmod +x .git/hooks/pre-commit
chmod +x .git/hooks/pre-push
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ hooks –¥–ª—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
SKIP_HOOKS=1 git commit -m "message"
SKIP_HOOKS=1 git push origin main

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
export SKIP_HOOKS=1
```

### –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ:

```bash
# –£–¥–∞–ª–∏—Ç—å hooks
rm .git/hooks/pre-commit
rm .git/hooks/pre-push

# –ò–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å
mv .git/hooks/pre-commit .git/hooks/pre-commit.disabled
mv .git/hooks/pre-push .git/hooks/pre-push.disabled
```

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–æ–∫

### Pre-commit (–±—ã—Å—Ç—Ä–æ, ~1-5 —Å–µ–∫):
```
üîç Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∏ PulseAI
==================================
üìù –ü—Ä–æ–≤–µ—Ä—è—é 5 Python —Ñ–∞–π–ª(–æ–≤)...
üêç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python...
‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Flake8 (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏)...
‚úÖ Flake8 –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞
üîé –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã...
‚úÖ Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
```

### Pre-push (—Å—Ç—Ä–æ–≥–æ, ~10-30 —Å–µ–∫):
```
üöÄ Pre-push –ø—Ä–æ–≤–µ—Ä–∫–∏ PulseAI
==================================
‚úÖ Flake8 –¥–æ—Å—Ç—É–ø–µ–Ω
‚úÖ Black –¥–æ—Å—Ç—É–ø–µ–Ω
üîç –ó–∞–ø—É—Å–∫ —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞...
üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...
‚úÖ Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
üîç –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Flake8...
‚úÖ Flake8 —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞
‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Black –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Black
pip install black

# –ò–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É
git push --no-verify
```

### "Flake8 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Flake8
pip install flake8

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—É–¥–µ—Ç —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π (—Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
```

### "Black –Ω–∞—à–µ–ª –ø—Ä–æ–±–ª–µ–º—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
python3 -m black .

# –î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add -A

# –ò–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
git push --no-verify
```

### "Flake8 –Ω–∞—à—ë–ª –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏"

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫–∏
python3 -m flake8 .

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
# –ó–∞—Ç–µ–º
git add -A
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ flake8"
```

## üéØ Best Practices

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow:

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –ø–∏—à–∏—Ç–µ –∫–æ–¥
2. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º** ‚Äî hook –ø—Ä–æ–≤–µ—Ä–∏—Ç staged —Ñ–∞–π–ª—ã (~1-5 —Å–µ–∫)
3. **–ü–µ—Ä–µ–¥ push** ‚Äî hook –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (~10-30 —Å–µ–∫)
4. **–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö** ‚Äî –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-verify` –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--no-verify`:

‚úÖ **–ú–æ–∂–Ω–æ:**
- WIP –∫–æ–º–º–∏—Ç—ã –≤ feature –≤–µ—Ç–∫–∞—Ö
- –°—Ä–æ—á–Ω—ã–µ hotfix
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–¥

‚ùå **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
- –ö–æ–º–º–∏—Ç—ã –≤ main/master
- Production releases
- Pull requests

### –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:

```bash
# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
./scripts/strict_check.sh

# –ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º —Ä–µ–ª–∏–∑–æ–º
./scripts/detailed_fix.sh
python3 -m black .
python3 -m flake8 .
```

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Flake8 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (.flake8):

```ini
[flake8]
max-line-length = 100
ignore = E203, W503
exclude = venv, node_modules, __pycache__, webapp
```

### Black –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (pyproject.toml):

```toml
[tool.black]
line-length = 100
target-version = ['py38']
exclude = 'venv|node_modules|__pycache__|webapp'
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [CONTRIBUTING.md](CONTRIBUTING.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—á–∞—Å—Ç–∏—é –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [CODE_QUALITY.md](guides/CODE_QUALITY.md) ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- [DEVELOPMENT.md](guides/DEVELOPMENT.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–æ–±–ª–µ–º—ã —Å git hooks? 

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: `python3 -c "import black, flake8"`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É: `./scripts/strict_check.sh`
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: hook –≤—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
4. –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ: `git push --no-verify`

---

*PulseAI - AI-powered news and events platform* üöÄ

